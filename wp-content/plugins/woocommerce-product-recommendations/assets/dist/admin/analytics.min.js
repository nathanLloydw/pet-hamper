!function(r){var a={};function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=r,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=24)}([function(e,t){e.exports=window.wp.i18n},function(e,t,r){e.exports=r(21)()},function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wc.data},function(e,t){e.exports=window.lodash},function(e,t){e.exports=window.wc.components},function(e,t){e.exports=window.wc.navigation},function(e,t){e.exports=window.wc.date},function(e,t){e.exports=window.wc.number},function(e,t){e.exports=window.wc.wcSettings},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.compose},function(e,t){e.exports=window.wp.hooks},function(e,t){e.exports=window.wp.date},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wc.csvExport},function(e,t){e.exports=window.wc.currency},function(e,t){e.exports=window.wp.apiFetch},function(e,t){e.exports=window.wp.url},function(e,t){function r(){return e.exports=r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,a=arguments[t];for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,r.apply(this,arguments)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wp.dom},function(e,t,r){"use strict";var s=r(22);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,o,n){if(n!==s)throw n=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"),n.name="Invariant Violation",n}function t(){return e}var r={array:e.isRequired=e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return r.PropTypes=r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},,function(v,e,t){"use strict";t.r(e);var A=t(12),Q=t(0),M=t(2),e=t(1),e=t.n(e),V=t(5),B=t(3),m=t(9),H=t(4),r=t(17),n=t.n(r),s=t(18),Y=t(6);function c(e,t){t=1<arguments.length&&void 0!==t?t:[],e=Object(H.find)(t,{key:e});return e||t[0]}r=function(a,e){let o=1<arguments.length&&void 0!==e?e:identity;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=a;const r=Object(Y.getIdsFromQuery)(e);if(r.length<1)return Promise.resolve([]);e={include:r.join(","),per_page:r.length};return n()({path:Object(s.addQueryArgs)(t,e)}).then(e=>e.map(o))}}(B.NAMESPACE+"/products",e=>({key:e.id,label:e.name}));const i={title:Object(Q.__)("Filter by Product and Location","woocommerce-product-recommendations"),filters:{location:{allowMultiple:!0,labels:{add:Object(Q.__)("Location","woocommerce-product-recommendations"),remove:Object(Q.__)("Remove Location filter","woocommerce-product-recommendations"),rule:Object(Q.__)("Choose a Location","woocommerce-product-recommendations"),title:Object(Q.__)("Location {{rule /}} {{filter /}}","woocommerce-product-recommendations"),filter:Object(Q.__)("Select a Location","woocommerce-product-recommendations")},rules:[{value:"includes",label:Object(Q._x)("Is","location-status-report-filter","woocommerce-product-recommendations")},{value:"excludes",label:Object(Q._x)("Is not","location-status-report-filter","woocommerce-product-recommendations")}],input:{component:"SelectControl",options:(null==(a=Object(m.getSetting)("admin",{}))?void 0:a.prlLocationOptions)||[]}},product:{labels:{add:Object(Q.__)("Products","woocommerce-product-recommendations"),placeholder:Object(Q.__)("Search products","woocommerce-product-recommendations"),remove:Object(Q.__)("Remove Products filter","woocommerce-product-recommendations"),rule:Object(Q.__)("Choose Products","woocommerce-product-recommendations"),title:Object(Q.__)("{{title}}Product{{/title}} {{rule /}} {{filter /}}","woocommerce-product-recommendations"),filter:Object(Q.__)("Select Products","woocommerce-product-recommendations")},rules:[{value:"includes",label:Object(Q._x)("Includes","products-report-filter","woocommerce-product-recommendations")},{value:"excludes",label:Object(Q._x)("Excludes","products-report-filter","woocommerce-product-recommendations")}],input:{component:"Search",type:"products",getLabels:r}}}},l=[{label:Object(Q.__)("Show","woocommerce-product-recommendations"),staticParams:["section","paged","per_page"],param:"filter",showFilters:()=>!0,filters:[{label:Object(Q.__)("All revenue","woocommerce-product-recommendations"),value:"all"},{label:Object(Q.__)("Advanced filters","woocommerce-product-recommendations"),value:"advanced"}]}],d="recommendations-revenue",u=[{key:"gross_sales",label:Object(Q.__)("Gross sales","woocommerce-product-recommendations"),order:"desc",orderby:"gross_sales",type:"currency"},{key:"net_sales",label:Object(Q.__)("Net sales","woocommerce-product-recommendations"),order:"desc",orderby:"net_sales",type:"currency"},{key:"items_sold",label:Object(Q.__)("Items sold","woocommerce-product-recommendations"),order:"desc",orderby:"items_sold",type:"number"},{key:"orders_count",label:Object(Q.__)("Orders","woocommerce-product-recommendations"),order:"desc",orderby:"orders_count",type:"number"}];var a=t(11),r=t(10),p=t(13),b=t(8),h=t(7),o=t(19),U=t.n(o),G=t(14),z=t(20),W=t(15),$=()=>Object(M.createElement)("svg",{role:"img","aria-hidden":"true",focusable:"false",version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 24 24"},Object(M.createElement)("path",{d:"M18,9c-0.009,0-0.017,0.002-0.025,0.003C17.72,5.646,14.922,3,11.5,3C7.91,3,5,5.91,5,9.5c0,0.524,0.069,1.031,0.186,1.519 C5.123,11.016,5.064,11,5,11c-2.209,0-4,1.791-4,4c0,1.202,0.541,2.267,1.38,3h18.593C22.196,17.089,23,15.643,23,14 C23,11.239,20.761,9,18,9z M12,16l-4-5h3V8h2v3h3L12,16z"}));class y extends M.Component{render(){var{className:e,isError:t,isEmpty:r}=this.props;let a,o,n,s;return t?(a=Object(Q.__)("There was an error getting your stats. Please try again.","woocommerce-product-bundles"),o=Object(Q.__)("Reload","woocommerce-product-bundles"),s=()=>{window.location.reload()}):r&&(a=Object(Q.__)("No results could be found for this date range.","woocommerce-product-bundles"),o=Object(Q.__)("View Orders","woocommerce-product-bundles"),n=Object(m.getAdminLink)("edit.php?post_type=shop_order")),Object(M.createElement)(V.EmptyContent,{className:e,title:a,actionLabel:o,actionURL:n,actionCallback:s})}}y.propTypes={className:e.a.string,isError:e.a.bool,isEmpty:e.a.bool},y.defaultProps={className:""};var K=y;o=s=>{const{getHeadersContent:a,getRowsContent:o,getSummary:n,isRequesting:e,primaryData:t,tableData:r,endpoint:c,itemIdField:L,tableQuery:I,compareBy:i,compareParam:l,searchBy:m,labels:d={},...u}=s,{query:p,columnPrefsKey:b}=s,{items:y,query:g}=r;var f=p[l]?Object(Y.getIdsFromQuery)(p[i]):[];const[h,_]=Object(M.useState)(f),O=Object(M.useRef)(null),{updateUserPreferences:j,...w}=Object(B.useUserPreferences)();if(r.isError||t.isError)return Object(M.createElement)(K,{isError:!0});let v=[];b&&(v=w&&w[b]?w[b]:v);const R=(e,t,r)=>{r=n?n(t,r):null;return Object(A.applyFilters)("woocommerce_admin_report_table",{endpoint:c,headers:a(),rows:o(e),totals:t,summary:r,items:y})};const C=e=>{var t=s["ids"];_(e?t:[])},S=(e,t)=>{var r=s["ids"];t?_(Object(H.uniq)([r[e],...h])):(t=h.indexOf(r[e]),_([...h.slice(0,t),...h.slice(t+1)]))};var f=e||r.isRequesting||t.isRequesting,E=Object(H.get)(t,["data","totals"],{}),q=y.totalResults||0,x=0<q;const D=Object(Y.getSearchWords)(p);var T=D.map(e=>({key:e,label:e})),P=y["data"],P=R(P,E,q);let{headers:F,rows:k}=P;var N,E=P["summary"],P=(i&&(k=k.map((e,t)=>[(e=>{var{ids:t=[]}=s,t=-1!==h.indexOf(t[e]);return{display:Object(M.createElement)(G.CheckboxControl,{onChange:Object(H.partial)(S,e),checked:t}),value:!1}})(t),...e]),F=[(()=>{var{ids:e=[]}=s,t=0<e.length,e=t&&e.length===h.length;return{cellClassName:"is-checkbox-column",key:"compare",label:Object(M.createElement)(G.CheckboxControl,{onChange:C,"aria-label":Object(Q.__)("Select All"),checked:e,disabled:!t}),required:!0}})(),...F]),P=F,(N=v)?P.map(e=>({...e,visible:e.required||!N.includes(e.key)})):P.map(e=>({...e,visible:e.required||!e.hiddenByDefault})));return Object(M.createElement)(M.Fragment,null,Object(M.createElement)("div",{className:"woocommerce-report-table__scroll-point",ref:O,"aria-hidden":!0}),Object(M.createElement)(V.TableCard,U()({className:"woocommerce-report-table-"+c.replace("/","-"),hasSearch:!!m,actions:[i&&Object(M.createElement)(V.CompareButton,{key:"compare",className:"woocommerce-table__compare",count:h.length,helpText:d.helpText||Object(Q.__)("Check at least two items below to compare","woocommerce-admin"),onClick:()=>{i&&Object(Y.onQueryChange)("compare")(i,l,h.join(","))},disabled:!x},d.compareButton||Object(Q.__)("Compare","woocommerce-admin")),m&&Object(M.createElement)(V.Search,{allowFreeTextSearch:!0,inlineTags:!0,key:"search",onChange:e=>{var t=s["baseSearchQuery"],e=e.map(e=>e.label.replace(",","%2C"));e.length?Object(Y.updateQueryString)({filter:void 0,[l]:void 0,[m]:void 0,...t,search:Object(H.uniq)(e).join(",")}):Object(Y.updateQueryString)({search:void 0})},placeholder:d.placeholder||Object(Q.__)("Search by item name","woocommerce-admin"),selected:T,showClearButton:!0,type:m,disabled:!x}),x&&Object(M.createElement)(G.Button,{key:"download",className:"woocommerce-table__download-button",disabled:f,onClick:()=>{const{createNotice:t,startExport:e,title:r}=s,a=Object.assign({},p);var{data:o,totalResults:n}=y;delete a.extended_info,a.search&&delete a[m],o&&o.length===n?({headers:o,rows:n}=R(o,n),Object(W.downloadCSVFile)(Object(W.generateCSVFileName)(r,a),Object(W.generateCSVDataFromTable)(o,n))):e(c,g).then(()=>t("success",Object(Q.sprintf)(Object(Q.__)("Your %s Report will be emailed to you.","woocommerce-admin"),r))).catch(e=>t("error",e.message||Object(Q.sprintf)(Object(Q.__)("There was a problem exporting your %s Report. Please try again.","woocommerce-admin"),r)))}},Object(M.createElement)($,null),Object(M.createElement)("span",{className:"woocommerce-table__download-button__label"},d.downloadButton||Object(Q.__)("Download","woocommerce-admin")))],headers:P,isLoading:f,onQueryChange:Y.onQueryChange,onColumnsChange:(t,e)=>{const r=F.map(e=>e.key);var a=r.filter(e=>!t.includes(e));b&&(a={[b]:a},j(a))},onSort:(e,t)=>{Object(Y.onQueryChange)("sort")(e,t);c},onPageChange:(e,t)=>{O.current.scrollIntoView();var r=O.current.nextSibling.querySelector(".woocommerce-table__table");const a=z.focus.focusable.find(r);a.length&&a[0].focus()},rows:k,rowsPerPage:parseInt(g.per_page,10)||B.QUERY_DEFAULTS.pageSize,summary:E,totalRows:q},u)))};o.propTypes={baseSearchQuery:e.a.object,compareBy:e.a.string,compareParam:e.a.string,columnPrefsKey:e.a.string,endpoint:e.a.string,getHeadersContent:e.a.func.isRequired,getRowsContent:e.a.func.isRequired,getSummary:e.a.func,itemIdField:e.a.string,labels:e.a.shape({compareButton:e.a.string,downloadButton:e.a.string,helpText:e.a.string,placeholder:e.a.string}),primaryData:e.a.object,searchBy:e.a.string,summaryFields:e.a.arrayOf(e.a.string),tableData:e.a.object.isRequired,tableQuery:e.a.object,title:e.a.string.isRequired},o.defaultProps={primaryData:{},tableData:{items:{data:[],totalResults:0},query:{}},tableQuery:{},compareParam:"filter",downloadable:!1,onSearch:H.noop,baseSearchQuery:{}};const g={};var f=Object(a.compose)(Object(r.withSelect)((e,t)=>{var{endpoint:t,getSummary:r,isRequesting:a,query:o,tableData:n,tableQuery:s,filters:c,advancedFilters:i,summaryFields:l,extendedItemsStoreName:m}=t,d=e(B.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings")["woocommerce_default_date_range"];if(a)return g;a=e(B.REPORTS_STORE_NAME);m&&e(m);return{primaryData:r?Object(B.getReportChartData)({endpoint:t,dataType:"primary",query:o,select:e,selector:a,filters:c,advancedFilters:i,defaultDateRange:d,fields:l}):g,tableData:n||Object(B.getReportTableData)({endpoint:t,query:o,select:e,selector:a,tableQuery:s,filters:c,advancedFilters:i,defaultDateRange:d}),query:o}}),Object(r.withDispatch)(e=>{var t=e(B.EXPORT_STORE_NAME)["startExport"],e=e("core/notices")["createNotice"];return{createNotice:e,startExport:t}}))(o),o=t(16),t=t.n(o);const R=t()(m.CURRENCY);o=Object(M.createContext)(R);class _ extends M.Component{constructor(){super(),this.getHeadersContent=this.getHeadersContent.bind(this),this.getRowsContent=this.getRowsContent.bind(this),this.getSummary=this.getSummary.bind(this)}getHeadersContent(){return[{label:Object(Q.__)("Date","woocommerce-product-recommendations"),key:"date",required:!0,isLeftAligned:!0,isSortable:!1},{label:Object(Q.__)("Items sold","woocommerce-product-recommendations"),key:"items_sold",isSortable:!0,isNumeric:!0},{label:Object(Q.__)("Gross sales","woocommerce-product-recommendations"),key:"gross_sales",defaultSort:!0,isSortable:!0,isNumeric:!0},{label:Object(Q.__)("Net sales","woocommerce-product-recommendations"),key:"net_sales",isSortable:!0,isNumeric:!0},{label:Object(Q.__)("Orders","woocommerce-product-recommendations"),key:"orders_count",isSortable:!0,isNumeric:!0},{label:Object(Q.__)("Products","woocommerce-product-recommendations"),key:"products_count",isSortable:!0,isNumeric:!0}].filter(Boolean)}getRowsContent(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];var t=this.props["query"],t=(Object(Y.getPersistedQuery)(t),Object(m.getSetting)("admin",{}));const s=t.dateFormat||h.defaultTableDateFormat,{render:c,formatDecimal:i,getCurrencyConfig:r}=this.context,l=r();return e.map(e=>{var{gross_sales:t,net_sales:r,items_sold:a,orders_count:o,products_count:n}=e.subtotals;return[{display:Object(M.createElement)(V.Date,{date:e.date_start,visibleFormat:s}),value:e.date_start},{display:Object(b.formatValue)(l,"number",a),value:Number(a)},{display:c(t),value:i(t)},{display:c(r),value:i(r)},{display:Object(b.formatValue)(l,"number",o),value:Number(o)},{display:Object(b.formatValue)(l,"number",n),value:Number(n)}]})}getSummary(e){var{orders_count:e=0,products_count:t=0,items_sold:r=0,net_sales:a=0,gross_sales:o=0}=e;const{formatAmount:n,getCurrencyConfig:s}=this.context;var c=s();return[{label:Object(Q._n)("item sold","items sold",r,"woocommerce-product-recommendations"),value:Object(b.formatValue)(c,"number",r)},{label:Object(Q.__)("gross","woocommerce-product-recommendations"),value:n(o)},{label:Object(Q.__)("net","woocommerce-product-recommendations"),value:n(a)},{label:Object(Q._n)("product","products",t,"woocommerce-product-recommendations"),value:Object(b.formatValue)(c,"number",t)},{label:Object(Q._n)("order","orders",e,"woocommerce-product-recommendations"),value:Object(b.formatValue)(c,"number",e)}]}render(){var{filters:e,advancedFilters:t,isRequesting:r,hideCompare:a,query:o,tableData:n,endpoint:s}=this.props;return Object(M.createElement)(f,{endpoint:s,getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:["orders_count","products_count","items_sold","net_sales","gross_sales"],isRequesting:r,query:o,tableData:n,columnPrefsKey:"prl_revenue_report_columns",compareBy:a?void 0:"recommendations",title:Object(Q.__)("Revenue","woocommerce-product-recommendations"),filters:e,advancedFilters:t})}}_.contextType=o;const C=[];const S=Object(H.memoize)((e,t,r,a,o)=>({interval:"day",orderby:t,order:e,page:r,per_page:a,after:Object(h.appendTimestamp)(o.primary.after,"start"),before:Object(h.appendTimestamp)(o.primary.before,"end")}),(e,t,r,a,o)=>[e,t,r,a,o.primary.after,o.primary.before].join(":"));var E=Object(a.compose)(Object(r.withSelect)((e,t)=>{var{query:t,filters:r,advancedFilters:a}=t,o=e(B.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings")["woocommerce_default_date_range"],o=Object(h.getCurrentDates)(t,o);const{getReportStats:n,getReportStatsError:s,isResolving:c}=e(B.REPORTS_STORE_NAME);var o=S(t.order||"desc",t.orderby||"date",t.paged||1,t.per_page||B.QUERY_DEFAULTS.pageSize,o),t=Object(B.getReportTableQuery)({endpoint:d,query:t,select:e,tableQuery:o,filters:r,advancedFilters:a}),e=n(d,t),r=Boolean(s(d,t)),a=c("getReportStats",[d,t]);return t=r,r=a,a=o,o=e,{tableData:{items:{data:Object(H.get)(o,["data","intervals"],C),totalResults:Object(H.get)(o,["totalResults"],0)},isError:t,isRequesting:r,query:a}}}))(_);class O extends M.Component{formatVal(e,t){const{formatAmount:r,getCurrencyConfig:a}=this.context;return"currency"===t?r(e):Object(b.formatValue)(a(),t,e)}getValues(e,t){var{emptySearchResults:r,summaryData:a}=this.props,a=a["totals"],o=a.primary?a.primary[e]:0,a=a.secondary?a.secondary[e]:0,e=r?0:o,o=r?0:a;return{delta:Object(b.calculateDelta)(e,o),prevValue:this.formatVal(o,t),value:this.formatVal(e,t)}}render(){const{charts:t,query:e,selectedChart:l,summaryData:r,defaultDateRange:a}=this.props;var{isError:o,isRequesting:n}=r;if(!o){if(n)return Object(M.createElement)(V.SummaryListPlaceholder,{numberOfItems:t.length});const m=Object(h.getDateParamsFromQuery)(e,a)["compare"];return Object(M.createElement)(V.SummaryList,null,e=>{let i=e["onToggle"];return t.map(e=>{var{key:e,order:t,orderby:r,label:a,type:o}=e;const n={chart:e};r&&(n.orderby=r),t&&(n.order=t);var r=Object(Y.getNewPath)(n),t=l.key===e,{delta:o,prevValue:s,value:c}=this.getValues(e,o);return Object(M.createElement)(V.SummaryNumber,{key:e,delta:o,href:r,label:a,prevLabel:"previous_period"===m?Object(Q.__)("Previous Period:","woocommerce-product-bundles"):Object(Q.__)("Previous Year:","woocommerce-product-bundles"),prevValue:s,selected:t,value:c,onLinkClickCallback:()=>{i&&i()}})})})}}}O.propTypes={charts:e.a.array.isRequired,endpoint:e.a.string.isRequired,query:e.a.object.isRequired,selectedChart:e.a.shape({key:e.a.string.isRequired,label:e.a.string.isRequired,order:e.a.oneOf(["asc","desc"]),orderby:e.a.string,type:e.a.oneOf(["average","number","currency"]).isRequired}).isRequired,summaryData:e.a.object,report:e.a.string},O.defaultProps={summaryData:{totals:{primary:{},secondary:{}},isError:!1}},O.contextType=o;var q=Object(a.compose)(Object(r.withSelect)((e,t)=>{const{charts:r,endpoint:a,limitProperties:o,query:n,filters:s,advancedFilters:c}=t,i=o||[a];t=i.some(e=>n[e]&&n[e].length);if(n.search&&!t)return{emptySearchResults:!0};var t=r&&r.map(e=>e.key),l=e(B.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings")["woocommerce_default_date_range"];return{summaryData:Object(B.getSummaryNumbers)({endpoint:a,query:n,select:e,limitBy:i,filters:s,advancedFilters:c,defaultDateRange:l,fields:t}),defaultDateRange:l}}))(O);class j extends M.Component{shouldComponentUpdate(e){return e.isRequesting!==this.props.isRequesting||e.primaryData.isRequesting!==this.props.primaryData.isRequesting||e.secondaryData.isRequesting!==this.props.secondaryData.isRequesting||!Object(H.isEqual)(e.query,this.props.query)}getItemChartData(){const{primaryData:e,selectedChart:a}=this.props;return e.data.intervals.map(function(e){const r={};return e.subtotals.segments.forEach(function(e){var t;e.segment_label&&(t=r[e.segment_label]?e.segment_label+" (#"+e.segment_id+")":e.segment_label,r[e.segment_id]={label:t,value:e.subtotals[a.key]||0})}),{date:Object(p.format)("Y-m-d\\TH:i:s",e.date_start),...r}})}getTimeChartData(){const{query:a,primaryData:e,secondaryData:o,selectedChart:n,defaultDateRange:t}=this.props,s=Object(h.getIntervalForQuery)(a),{primary:c,secondary:i}=Object(h.getCurrentDates)(a,t);return e.data.intervals.map(function(e,t){const r=Object(h.getPreviousDate)(e.date_start,c.after,i.after,a.compare,s);t=o.data.intervals[t];return{date:Object(p.format)("Y-m-d\\TH:i:s",e.date_start),primary:{label:`${c.label} (${c.range})`,labelDate:e.date_start,value:e.subtotals[n.key]||0},secondary:{label:`${i.label} (${i.range})`,labelDate:r.format("YYYY-MM-DD HH:mm:ss"),value:t&&t.subtotals[n.key]||0}}})}getTimeChartTotals(){var{primaryData:e,secondaryData:t,selectedChart:r}=this.props;return{primary:Object(H.get)(e,["data","totals",r.key],null),secondary:Object(H.get)(t,["data","totals",r.key],null)}}renderChart(e,t,r,a){var{emptySearchResults:o,filterParam:n,interactiveLegend:s,itemsLabel:c,legendPosition:i,path:l,query:m,selectedChart:d,showHeaderControls:u,primaryData:p}=this.props,b=Object(h.getIntervalForQuery)(m),y=Object(h.getAllowedIntervalsForQuery)(m),p=Object(h.getDateFormatsForInterval)(b,p.data.intervals.length),o=o?Object(Q.__)("No data for the current search","woocommerce-admin"):Object(Q.__)("No data for the selected date range","woocommerce-admin");const{formatAmount:g,getCurrencyConfig:f}=this.context;return Object(M.createElement)(V.Chart,{allowedIntervals:y,data:r,dateParser:"%Y-%m-%dT%H:%M:%S",emptyMessage:o,filterParam:n,interactiveLegend:s,interval:b,isRequesting:t,itemsLabel:c,legendPosition:i,legendTotals:a,mode:e,path:l,query:m,screenReaderFormat:p.screenReaderFormat,showHeaderControls:u,title:d.label,tooltipLabelFormat:p.tooltipLabelFormat,tooltipTitle:"time-comparison"===e&&d.label||null,tooltipValueFormat:Object(B.getTooltipValueFormat)(d.type,g),chartType:Object(h.getChartTypeForQuery)(m),valueType:d.type,xFormat:p.xFormat,x2Format:p.x2Format,currency:f()})}renderItemComparison(){var{isRequesting:e,primaryData:t}=this.props;if(t.isError)return Object(M.createElement)(K,{isError:!0});e=e||t.isRequesting,t=this.getItemChartData();return this.renderChart("item-comparison",e,t)}renderTimeComparison(){var{isRequesting:e,primaryData:t,secondaryData:r}=this.props;if(!t||t.isError||r.isError)return Object(M.createElement)(K,{isError:!0});e=e||t.isRequesting||r.isRequesting,t=this.getTimeChartData(),r=this.getTimeChartTotals();return this.renderChart("time-comparison",e,t,r)}render(){var e=this.props["mode"];return"item-comparison"===e?this.renderItemComparison():this.renderTimeComparison()}}j.contextType=o,j.propTypes={filters:e.a.array,isRequesting:e.a.bool,itemsLabel:e.a.string,limitProperties:e.a.array,mode:e.a.string,path:e.a.string.isRequired,primaryData:e.a.object,query:e.a.object.isRequired,secondaryData:e.a.object,selectedChart:e.a.shape({key:e.a.string.isRequired,label:e.a.string.isRequired,order:e.a.oneOf(["asc","desc"]),orderby:e.a.string,type:e.a.oneOf(["average","number","currency"]).isRequired}).isRequired},j.defaultProps={isRequesting:!1,primaryData:{data:{intervals:[]},isError:!1,isRequesting:!1},secondaryData:{data:{intervals:[]},isError:!1,isRequesting:!1}};var x=Object(a.compose)(Object(r.withSelect)((e,t)=>{const{charts:r,endpoint:a,filters:o,isRequesting:n,limitProperties:s,query:c,advancedFilters:i}=t,l=s||[a];var m=function e(t,r,a){var o,a=2<arguments.length&&void 0!==a?a:{};if(!t||0===t.length)return null;const n=t.slice(0),s=n.pop();return s.showFilters(r,a)?(t=Object(Y.flattenFilters)(s.filters),o=r[s.param]||s.defaultValue||"all",Object(H.find)(t,{value:o})):e(n,r,a)}(o,c),d=Object(H.get)(m,["settings","param"]),t=t.mode||function(e,t){if(e&&t){var r=Object(H.get)(e,["settings","param"]);if(!r||Object.keys(t).includes(r))return Object(H.get)(e,["chartMode"])}return null}(m,c)||"time-comparison",m=e(B.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings")["woocommerce_default_date_range"],u=e(B.REPORTS_STORE_NAME),d={mode:t,filterParam:d,defaultDateRange:m};if(n)return d;var p=l.some(e=>c[e]&&c[e].length);if(c.search&&!p)return{...d,emptySearchResults:!0};var p=r&&r.map(e=>e.key),b=Object(B.getReportChartData)({endpoint:a,dataType:"primary",query:c,select:e,selector:u,limitBy:l,filters:o,advancedFilters:i,defaultDateRange:m,fields:p});if("item-comparison"===t)return{...d,primaryData:b};t=Object(B.getReportChartData)({endpoint:a,dataType:"secondary",query:c,select:e,selector:u,limitBy:l,filters:o,advancedFilters:i,defaultDateRange:m,fields:p});return{...d,primaryData:b,secondaryData:t}}))(j);class w extends M.Component{getChartMeta(){var{}=this.props;return{itemsLabel:Object(Q.__)("%d conversions","woocommerce-product-recommendations"),mode:"time-comparison"}}render(){var{itemsLabel:e,mode:t}=this.getChartMeta(),{path:r,query:a,isError:o,isRequesting:n}=this.props;if(o)return Object(M.createElement)(ReportError,{isError:!0});o={...a};return Object(M.createElement)(M.Fragment,null,Object(M.createElement)(V.ReportFilters,{query:a,path:r,showDatePicker:!0,filters:l,advancedFilters:i}),Object(M.createElement)(q,{mode:t,charts:u,endpoint:d,isRequesting:n,query:o,selectedChart:c(a.chart,u),filters:l,advancedFilters:i}),Object(M.createElement)(x,{charts:u,mode:t,endpoint:d,isRequesting:n,itemsLabel:e,path:r,query:o,selectedChart:c(o.chart,u),filters:l,advancedFilters:i}),Object(M.createElement)(E,{isRequesting:n,endpoint:d,hideCompare:!0,query:a,filters:l,advancedFilters:i}))}}w.propTypes={path:e.a.string.isRequired,query:e.a.object.isRequired};var D=w,T=e=>{var t=e["query"];e.query.section="revenue";let r;return r="revenue"===t.section?Object(M.createElement)(D,e):Object(M.createElement)(K,null)};Object(A.addFilter)("woocommerce_admin_reports_list","woocommerce-product-recommendations",e=>[...e,{report:"recommendations",title:Object(Q._x)("Recommendations","analytics report menu item","woocommerce-product-recommendations"),component:T,navArgs:{id:"wc-prl-recommendations-analytics-report"}}])}]);